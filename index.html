<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MenuCraft - Professional Digital Menu Builder</title>
    <meta name="description" content="Create stunning restaurant menus with modern design, 3D models, multilingual support, and responsive layouts.">
    
    <!-- External Dependencies -->
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Noto+Sans+Arabic:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&family=Dancing+Script:wght@400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .rtl {
            direction: rtl;
            font-family: 'Noto Sans Arabic', sans-serif;
        }
        
        /* Enhanced animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.3); }
            50% { box-shadow: 0 0 40px rgba(59, 130, 246, 0.6); }
        }
        
        @keyframes phoneFloat {
            0%, 100% { transform: translateY(0px) rotateX(10deg); }
            50% { transform: translateY(-10px) rotateX(10deg); }
        }
        
        /* Landing page styles */
        .hero-section {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero-bg-animation {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="1" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.5;
            animation: floating 6s ease-in-out infinite;
        }
        
        .hero-content {
            text-align: center;
            color: white;
            z-index: 10;
            animation: fadeIn 1s ease-out;
        }
        
        .logo {
            font-size: 4rem;
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #fff, #e0e7ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .tagline {
            font-size: 1.5rem;
            margin-bottom: 3rem;
            opacity: 0.9;
            font-weight: 400;
        }
        
        .cta-button {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            padding: 1.5rem 3rem;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        .cta-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(59, 130, 246, 0.4);
        }
        
        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            transform: scale(0.8);
            transition: transform 0.3s ease;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .modal-overlay.show .modal-content {
            transform: scale(1);
        }
        
        /* Form styles */
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #374151;
        }
        
        .form-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #f9fafb;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            background: white;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
        }
        
        .btn-secondary {
            background: #f3f4f6;
            color: #374151;
            border: 2px solid #e5e7eb;
        }
        
        .btn-secondary:hover {
            background: #e5e7eb;
        }
        
        .btn-ghost {
            background: transparent;
            color: #6b7280;
            border: 1px solid transparent;
        }
        
        .btn-ghost:hover {
            background: #f3f4f6;
        }
        
        /* App interface styles */
        .app-interface {
            display: none;
            min-height: 100vh;
            background: #f8fafc;
        }
        
        .app-interface.show {
            display: flex;
            flex-direction: column;
        }
        
        .app-header {
            background: white;
            padding: 1rem 2rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: between;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .app-nav {
            display: flex;
            gap: 2rem;
            align-items: center;
        }
        
        .nav-item {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .nav-item.active {
            background: #3b82f6;
            color: white;
        }
        
        .nav-item:hover:not(.active) {
            background: #f3f4f6;
        }
        
        .app-content {
            flex: 1;
            display: flex;
            overflow: hidden;
        }
        
        /* Sidebar styles */
        .sidebar {
            width: 350px;
            background: white;
            border-right: 1px solid #e5e7eb;
            overflow-y: auto;
            padding: 1.5rem;
        }
        
        .sidebar-section {
            margin-bottom: 2rem;
        }
        
        .sidebar-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #1f2937;
        }
        
        /* Template cards */
        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            padding: 2rem;
        }
        
        .template-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
        }
        
        .template-card:hover {
            transform: translateY(-8px) rotateY(5deg);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        .template-preview {
            height: 200px;
            position: relative;
            overflow: hidden;
        }
        
        .template-dark {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            color: white;
        }
        
        .template-light {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            color: #1e293b;
        }
        
        .template-vibrant {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
        }
        
        .template-luxury {
            background: linear-gradient(135deg, #d4af37 0%, #ffd700 100%);
            color: #7c2d12;
        }
        
        .template-nature {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }
        
        .template-ocean {
            background: linear-gradient(135deg, #0ea5e9 0%, #0369a1 100%);
            color: white;
        }
        
        /* Mobile phone preview */
        .phone-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
        }
        
        .phone-frame {
            width: 300px;
            height: 600px;
            background: #1f2937;
            border-radius: 40px;
            padding: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            position: relative;
            animation: phoneFloat 4s ease-in-out infinite;
            transform-style: preserve-3d;
            perspective: 1000px;
        }
        
        .phone-screen {
            width: 100%;
            height: 100%;
            background: white;
            border-radius: 25px;
            overflow: hidden;
            position: relative;
        }
        
        .phone-notch {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 25px;
            background: #1f2937;
            border-radius: 15px;
            z-index: 10;
        }
        
        .menu-preview {
            height: 100%;
            overflow-y: auto;
            padding: 40px 20px 20px 20px;
            background: var(--preview-bg, white);
            color: var(--preview-text, #1f2937);
        }
        
        .menu-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .menu-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .menu-subtitle {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .menu-section {
            margin-bottom: 25px;
        }
        
        .section-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            border-bottom: 2px solid var(--accent-color, #3b82f6);
            padding-bottom: 5px;
        }
        
        .menu-item {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 8px;
            background: var(--item-bg, #f8fafc);
            border-left: 3px solid var(--accent-color, #3b82f6);
        }
        
        .item-info {
            flex: 1;
        }
        
        .item-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .item-description {
            font-size: 0.8rem;
            opacity: 0.8;
            line-height: 1.4;
        }
        
        .item-price {
            font-weight: 700;
            color: var(--accent-color, #3b82f6);
            margin-left: 10px;
        }
        
        /* Customization panel */
        .customization-panel {
            position: fixed;
            right: -400px;
            top: 0;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            transition: right 0.3s ease;
            z-index: 100;
            overflow-y: auto;
            padding: 2rem;
        }
        
        .customization-panel.open {
            right: 0;
        }
        
        .color-picker {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .color-picker:hover {
            transform: scale(1.1);
        }
        
        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #e5e7eb;
            outline: none;
            margin: 10px 0;
        }
        
        .font-selector {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background: white;
            cursor: pointer;
        }
        
        /* Language toggle */
        .lang-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 10px 20px;
            border-radius: 25px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            z-index: 200;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .lang-toggle:hover {
            background: white;
            transform: scale(1.05);
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: -350px;
                z-index: 50;
                transition: left 0.3s ease;
            }
            
            .sidebar.open {
                left: 0;
            }
            
            .phone-frame {
                width: 250px;
                height: 500px;
            }
            
            .customization-panel {
                width: 100%;
                right: -100%;
            }
            
            .logo {
                font-size: 2.5rem;
            }
            
            .tagline {
                font-size: 1.2rem;
            }
            
            .template-grid {
                grid-template-columns: 1fr;
                padding: 1rem;
            }
        }
        
        /* Toast notifications */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            animation: slideInRight 0.3s ease-out;
            border-left: 4px solid #10b981;
        }
        
        .hidden {
            display: none !important;
        }
        
        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid #e5e7eb;
            border-top: 2px solid #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Menu item editing */
        .menu-item-editable {
            border: 2px dashed #3b82f6;
            cursor: pointer;
            position: relative;
        }
        
        .menu-item-editable:hover::after {
            content: '‚úèÔ∏è Edit';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(59, 130, 246, 0.9);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
        }
        
        .add-item-btn {
            width: 100%;
            padding: 20px;
            border: 2px dashed #3b82f6;
            background: transparent;
            border-radius: 12px;
            cursor: pointer;
            color: #3b82f6;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .add-item-btn:hover {
            background: #3b82f6;
            color: white;
        }
    </style>
</head>
<body>
    <!-- Language Toggle -->
    <button class="lang-toggle" onclick="toggleLanguage()">
        <span id="lang-text">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</span>
    </button>

    <!-- Landing Page -->
    <section id="landing-page" class="hero-section">
        <div class="hero-bg-animation"></div>
        <div class="hero-content">
            <h1 class="logo" data-en="MenuCraft" data-ar="ŸÖŸÜÿ¥ÿ¶ ÿßŸÑŸÇŸàÿßÿ¶ŸÖ">MenuCraft</h1>
            <p class="tagline" data-en="Craft your perfect menu in minutes" data-ar="ÿßÿµŸÜÿπ ŸÇÿßÿ¶ŸÖÿ™ŸÉ ÿßŸÑŸÖÿ´ÿßŸÑŸäÿ© ŸÅŸä ÿØŸÇÿßÿ¶ŸÇ">
                Craft your perfect menu in minutes
            </p>
            <button class="cta-button" onclick="showAuthModal()" data-en="Start Creating Now" data-ar="ÿßÿ®ÿØÿ£ ÿßŸÑÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ¢ŸÜ">
                Start Creating Now
            </button>
        </div>
    </section>

    <!-- Authentication Modal -->
    <div id="auth-modal" class="modal-overlay">
        <div class="modal-content">
            <div id="auth-tabs" style="display: flex; margin-bottom: 2rem; border-bottom: 1px solid #e5e7eb;">
                <button class="nav-item active" onclick="switchAuthTab('login')" data-en="Sign In" data-ar="ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ">Sign In</button>
                <button class="nav-item" onclick="switchAuthTab('signup')" data-en="Sign Up" data-ar="ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®">Sign Up</button>
            </div>
            
            <!-- Login Form -->
            <form id="login-form" class="auth-form">
                <div class="form-group">
                    <label class="form-label" data-en="Email Address" data-ar="ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä">Email Address</label>
                    <input type="email" class="form-input" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label class="form-label" data-en="Password" data-ar="ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±">Password</label>
                    <input type="password" class="form-input" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 1rem;" data-en="Sign In" data-ar="ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ">
                    Sign In
                </button>
            </form>
            
            <!-- Signup Form -->
            <form id="signup-form" class="auth-form hidden">
                <div class="form-group">
                    <label class="form-label" data-en="Full Name" data-ar="ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ">Full Name</label>
                    <input type="text" class="form-input" required placeholder="John Smith">
                </div>
                <div class="form-group">
                    <label class="form-label" data-en="Email Address" data-ar="ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä">Email Address</label>
                    <input type="email" class="form-input" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label class="form-label" data-en="Password" data-ar="ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±">Password</label>
                    <input type="password" class="form-input" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 1rem;" data-en="Create Account" data-ar="ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®">
                    Create Account
                </button>
            </form>
            
            <div style="text-align: center; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #e5e7eb;">
                <button class="btn btn-secondary" onclick="continueAsGuest()" data-en="Continue as Guest" data-ar="ŸÖÿ™ÿßÿ®ÿπÿ© ŸÉÿ∂ŸäŸÅ">
                    Continue as Guest
                </button>
            </div>
        </div>
    </div>

    <!-- Main App Interface -->
    <div id="app-interface" class="app-interface">
        <!-- App Header -->
        <header class="app-header">
            <div class="app-nav">
                <div class="nav-item active" onclick="switchTab('templates')" data-en="Templates" data-ar="ÿßŸÑŸÇŸàÿßŸÑÿ®">Templates</div>
                <div class="nav-item" onclick="switchTab('editor')" data-en="Editor" data-ar="ÿßŸÑŸÖÿ≠ÿ±ÿ±">Editor</div>
                <div class="nav-item" onclick="switchTab('preview')" data-en="Preview" data-ar="ŸÖÿπÿßŸäŸÜÿ©">Preview</div>
            </div>
            <div style="margin-left: auto; display: flex; gap: 1rem; align-items: center;">
                <button class="btn btn-ghost" onclick="toggleCustomization()" data-en="Customize" data-ar="ÿ™ÿÆÿµŸäÿµ">üé® Customize</button>
                <button class="btn btn-primary" onclick="saveMenu()" data-en="Save Menu" data-ar="ÿ≠ŸÅÿ∏ ÿßŸÑŸÇÿßÿ¶ŸÖÿ©">üíæ Save Menu</button>
                <span id="user-name" style="color: #6b7280; font-weight: 500;"></span>
            </div>
        </header>

        <!-- App Content -->
        <div class="app-content">
            <!-- Templates Section -->
            <div id="templates-section" class="template-grid">
                <div class="template-card" onclick="selectTemplate('dark')" data-template="dark">
                    <div class="template-preview template-dark">
                        <div style="padding: 1rem; text-align: center;">
                            <h3 style="margin-bottom: 0.5rem;">Restaurant Name</h3>
                            <p style="opacity: 0.8; font-size: 0.9rem;">Fine Dining Experience</p>
                        </div>
                        <div style="padding: 0 1rem 1rem;">
                            <div style="margin-bottom: 0.5rem; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.3); padding-bottom: 0.25rem;">Appetizers</div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 0.5rem;">
                                <span>Signature Dish</span><span style="color: #8b5cf6;">$12</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                                <span>Special Item</span><span style="color: #8b5cf6;">$8</span>
                            </div>
                        </div>
                    </div>
                    <div style="padding: 1rem;">
                        <h3 style="font-weight: 600; margin-bottom: 0.5rem;" data-en="Modern Dark" data-ar="ÿπÿµÿ±Ÿä ÿØÿßŸÉŸÜ">Modern Dark</h3>
                        <p style="color: #6b7280; font-size: 0.9rem;" data-en="Professional dark theme with purple accents" data-ar="ŸÖŸàÿ∂Ÿàÿπ ÿØÿßŸÉŸÜ ÿßÿ≠ÿ™ÿ±ÿßŸÅŸä ŸÖÿπ ŸÑŸÖÿ≥ÿßÿ™ ÿ®ŸÜŸÅÿ≥ÿ¨Ÿäÿ©">Professional dark theme with purple accents</p>
                    </div>
                </div>

                <div class="template-card" onclick="selectTemplate('light')" data-template="light">
                    <div class="template-preview template-light">
                        <div style="padding: 1rem; text-align: center;">
                            <h3 style="margin-bottom: 0.5rem; color: #1e293b;">Restaurant Name</h3>
                            <p style="opacity: 0.8; font-size: 0.9rem; color: #1e293b;">Fine Dining Experience</p>
                        </div>
                        <div style="padding: 0 1rem 1rem;">
                            <div style="margin-bottom: 0.5rem; font-weight: 600; border-bottom: 1px solid #e2e8f0; padding-bottom: 0.25rem; color: #1e293b;">Appetizers</div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 0.5rem; color: #1e293b;">
                                <span>Signature Dish</span><span style="color: #3b82f6;">$12</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: #1e293b;">
                                <span>Special Item</span><span style="color: #3b82f6;">$8</span>
                            </div>
                        </div>
                    </div>
                    <div style="padding: 1rem;">
                        <h3 style="font-weight: 600; margin-bottom: 0.5rem;" data-en="Minimalist Light" data-ar="ÿ®ÿ≥Ÿäÿ∑ ŸÅÿßÿ™ÿ≠">Minimalist Light</h3>
                        <p style="color: #6b7280; font-size: 0.9rem;" data-en="Clean and elegant design with blue accents" data-ar="ÿ™ÿµŸÖŸäŸÖ ŸÜÿ∏ŸäŸÅ Ÿàÿ£ŸÜŸäŸÇ ŸÖÿπ ŸÑŸÖÿ≥ÿßÿ™ ÿ≤ÿ±ŸÇÿßÿ°">Clean and elegant design with blue accents</p>
                    </div>
                </div>

                <div class="template-card" onclick="selectTemplate('vibrant')" data-template="vibrant">
                    <div class="template-preview template-vibrant">
                        <div style="padding: 1rem; text-align: center;">
                            <h3 style="margin-bottom: 0.5rem;">Restaurant Name</h3>
                            <p style="opacity: 0.8; font-size: 0.9rem;">Fine Dining Experience</p>
                        </div>
                        <div style="padding: 0 1rem 1rem;">
                            <div style="margin-bottom: 0.5rem; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.3); padding-bottom: 0.25rem;">Appetizers</div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 0.5rem;">
                                <span>Signature Dish</span><span style="color: #fed7d7;">$12</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                                <span>Special Item</span><span style="color: #fed7d7;">$8</span>
                            </div>
                        </div>
                    </div>
                    <div style="padding: 1rem;">
                        <h3 style="font-weight: 600; margin-bottom: 0.5rem;" data-en="Vibrant Food Focus" data-ar="ÿ∑ÿπÿßŸÖ ŸÜÿßÿ®ÿ∂ ÿ®ÿßŸÑÿ≠Ÿäÿßÿ©">Vibrant Food Focus</h3>
                        <p style="color: #6b7280; font-size: 0.9rem;" data-en="Bold orange-red theme perfect for showcasing dishes" data-ar="ŸÖŸàÿ∂Ÿàÿπ ÿ®ÿ±ÿ™ŸÇÿßŸÑŸä ÿ£ÿ≠ŸÖÿ± ÿ¨ÿ±Ÿäÿ° ŸÖÿ´ÿßŸÑŸä ŸÑÿπÿ±ÿ∂ ÿßŸÑÿ£ÿ∑ÿ®ÿßŸÇ">Bold orange-red theme perfect for showcasing dishes</p>
                    </div>
                </div>

                <div class="template-card" onclick="selectTemplate('luxury')" data-template="luxury">
                    <div class="template-preview template-luxury">
                        <div style="padding: 1rem; text-align: center;">
                            <h3 style="margin-bottom: 0.5rem; color: #7c2d12;">Restaurant Name</h3>
                            <p style="opacity: 0.8; font-size: 0.9rem; color: #7c2d12;">Fine Dining Experience</p>
                        </div>
                        <div style="padding: 0 1rem 1rem;">
                            <div style="margin-bottom: 0.5rem; font-weight: 600; border-bottom: 1px solid #fde68a; padding-bottom: 0.25rem; color: #7c2d12;">Appetizers</div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 0.5rem; color: #7c2d12;">
                                <span>Signature Dish</span><span style="color: #d97706;">$12</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: #7c2d12;">
                                <span>Special Item</span><span style="color: #d97706;">$8</span>
                            </div>
                        </div>
                    </div>
                    <div style="padding: 1rem;">
                        <h3 style="font-weight: 600; margin-bottom: 0.5rem;" data-en="Luxury Gold" data-ar="ÿ∞Ÿáÿ®Ÿä ŸÅÿßÿÆÿ±">Luxury Gold</h3>
                        <p style="color: #6b7280; font-size: 0.9rem;" data-en="Sophisticated gold and cream design for premium restaurants" data-ar="ÿ™ÿµŸÖŸäŸÖ ÿ∞Ÿáÿ®Ÿä ŸàŸÉÿ±ŸäŸÖŸä ŸÖÿ™ÿ∑Ÿàÿ± ŸÑŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÅÿßÿÆÿ±ÿ©">Sophisticated gold and cream design for premium restaurants</p>
                    </div>
                </div>

                <div class="template-card" onclick="selectTemplate('nature')" data-template="nature">
                    <div class="template-preview template-nature">
                        <div style="padding: 1rem; text-align: center;">
                            <h3 style="margin-bottom: 0.5rem;">Restaurant Name</h3>
                            <p style="opacity: 0.8; font-size: 0.9rem;">Fine Dining Experience</p>
                        </div>
                        <div style="padding: 0 1rem 1rem;">
                            <div style="margin-bottom: 0.5rem; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.3); padding-bottom: 0.25rem;">Appetizers</div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 0.5rem;">
                                <span>Signature Dish</span><span style="color: #bbf7d0;">$12</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                                <span>Special Item</span><span style="color: #bbf7d0;">$8</span>
                            </div>
                        </div>
                    </div>
                    <div style="padding: 1rem;">
                        <h3 style="font-weight: 600; margin-bottom: 0.5rem;" data-en="Fresh Green" data-ar="ÿ£ÿÆÿ∂ÿ± ÿ∑ÿßÿ≤ÿ¨">Fresh Green</h3>
                        <p style="color: #6b7280; font-size: 0.9rem;" data-en="Natural green theme perfect for organic and healthy food" data-ar="ŸÖŸàÿ∂Ÿàÿπ ÿ£ÿÆÿ∂ÿ± ÿ∑ÿ®ŸäÿπŸä ŸÖÿ´ÿßŸÑŸä ŸÑŸÑÿ∑ÿπÿßŸÖ ÿßŸÑÿπÿ∂ŸàŸä ŸàÿßŸÑÿµÿ≠Ÿä">Natural green theme perfect for organic and healthy food</p>
                    </div>
                </div>

                <div class="template-card" onclick="selectTemplate('ocean')" data-template="ocean">
                    <div class="template-preview template-ocean">
                        <div style="padding: 1rem; text-align: center;">
                            <h3 style="margin-bottom: 0.5rem;">Restaurant Name</h3>
                            <p style="opacity: 0.8; font-size: 0.9rem;">Fine Dining Experience</p>
                        </div>
                        <div style="padding: 0 1rem 1rem;">
                            <div style="margin-bottom: 0.5rem; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.3); padding-bottom: 0.25rem;">Appetizers</div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 0.5rem;">
                                <span>Signature Dish</span><span style="color: #bfdbfe;">$12</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                                <span>Special Item</span><span style="color: #bfdbfe;">$8</span>
                            </div>
                        </div>
                    </div>
                    <div style="padding: 1rem;">
                        <h3 style="font-weight: 600; margin-bottom: 0.5rem;" data-en="Ocean Blue" data-ar="ÿ£ÿ≤ÿ±ŸÇ ÿßŸÑŸÖÿ≠Ÿäÿ∑">Ocean Blue</h3>
                        <p style="color: #6b7280; font-size: 0.9rem;" data-en="Deep blue elegant design perfect for seafood restaurants" data-ar="ÿ™ÿµŸÖŸäŸÖ ÿ£ÿ≤ÿ±ŸÇ ÿπŸÖŸäŸÇ ÿ£ŸÜŸäŸÇ ŸÖÿ´ÿßŸÑŸä ŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÖÿ£ŸÉŸàŸÑÿßÿ™ ÿßŸÑÿ®ÿ≠ÿ±Ÿäÿ©">Deep blue elegant design perfect for seafood restaurants</p>
                    </div>
                </div>
            </div>

            <!-- Editor Section -->
            <div id="editor-section" class="hidden" style="display: flex; flex: 1;">
                <!-- Sidebar -->
                <div class="sidebar">
                    <div class="sidebar-section">
                        <h3 class="sidebar-title" data-en="Restaurant Information" data-ar="ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ∑ÿπŸÖ">Restaurant Information</h3>
                        <div class="form-group">
                            <label class="form-label" data-en="Restaurant Name" data-ar="ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ">Restaurant Name</label>
                            <input type="text" class="form-input" id="restaurant-name" placeholder="Your Restaurant Name" oninput="updatePreview()">
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-en="Menu Title" data-ar="ÿπŸÜŸàÿßŸÜ ÿßŸÑŸÇÿßÿ¶ŸÖÿ©">Menu Title</label>
                            <input type="text" class="form-input" id="menu-title" placeholder="Dinner Menu" oninput="updatePreview()">
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-en="Tagline" data-ar="ÿßŸÑÿ¥ÿπÿßÿ±">Tagline</label>
                            <input type="text" class="form-input" id="menu-tagline" placeholder="Fine dining experience" oninput="updatePreview()">
                        </div>
                    </div>

                    <div class="sidebar-section">
                        <h3 class="sidebar-title" data-en="Menu Sections" data-ar="ÿ£ŸÇÿ≥ÿßŸÖ ÿßŸÑŸÇÿßÿ¶ŸÖÿ©">Menu Sections</h3>
                        <div id="sections-list">
                            <div class="form-group">
                                <button class="btn btn-primary" onclick="addSection()" data-en="+ Add Section" data-ar="+ ÿ•ÿ∂ÿßŸÅÿ© ŸÇÿ≥ŸÖ">+ Add Section</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Phone Preview -->
                <div class="phone-container">
                    <div class="phone-frame">
                        <div class="phone-notch"></div>
                        <div class="phone-screen">
                            <div id="menu-preview" class="menu-preview">
                                <div class="menu-header">
                                    <div class="menu-title" id="preview-restaurant">Your Restaurant Name</div>
                                    <div class="menu-subtitle" id="preview-title">Menu</div>
                                    <div style="font-size: 0.8rem; opacity: 0.8; margin-top: 5px;" id="preview-tagline">Fine dining experience</div>
                                </div>
                                <div id="preview-sections">
                                    <div class="menu-section">
                                        <div class="section-title">Sample Section</div>
                                        <div class="menu-item menu-item-editable" onclick="editItem(this)">
                                            <div class="item-info">
                                                <div class="item-name">Sample Dish</div>
                                                <div class="item-description">Click to edit this item</div>
                                            </div>
                                            <div class="item-price">$12</div>
                                        </div>
                                        <button class="add-item-btn" onclick="addItem(this)" data-en="+ Add Menu Item" data-ar="+ ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÜÿµÿ±">+ Add Menu Item</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Preview Section -->
            <div id="preview-section" class="hidden phone-container">
                <div class="phone-frame">
                    <div class="phone-notch"></div>
                    <div class="phone-screen">
                        <div class="menu-preview" id="final-preview">
                            <!-- Content will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Customization Panel -->
    <div id="customization-panel" class="customization-panel">
        <h3 style="margin-bottom: 2rem; font-weight: 700;" data-en="Customize Design" data-ar="ÿ™ÿÆÿµŸäÿµ ÿßŸÑÿ™ÿµŸÖŸäŸÖ">Customize Design</h3>
        
        <div style="margin-bottom: 2rem;">
            <h4 style="margin-bottom: 1rem; font-weight: 600;" data-en="Colors" data-ar="ÿßŸÑÿ£ŸÑŸàÿßŸÜ">Colors</h4>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;" data-en="Background" data-ar="ÿßŸÑÿÆŸÑŸÅŸäÿ©">Background</label>
                    <input type="color" class="color-picker" id="bg-color" value="#ffffff" onchange="updateCustomization()">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;" data-en="Text Color" data-ar="ŸÑŸàŸÜ ÿßŸÑŸÜÿµ">Text Color</label>
                    <input type="color" class="color-picker" id="text-color" value="#1f2937" onchange="updateCustomization()">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;" data-en="Accent Color" data-ar="ÿßŸÑŸÑŸàŸÜ ÿßŸÑŸÖŸÖŸäÿ≤">Accent Color</label>
                    <input type="color" class="color-picker" id="accent-color" value="#3b82f6" onchange="updateCustomization()">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;" data-en="Item Background" data-ar="ÿÆŸÑŸÅŸäÿ© ÿßŸÑÿπŸÜÿµÿ±">Item Background</label>
                    <input type="color" class="color-picker" id="item-bg-color" value="#f8fafc" onchange="updateCustomization()">
                </div>
            </div>
        </div>

        <div style="margin-bottom: 2rem;">
            <h4 style="margin-bottom: 1rem; font-weight: 600;" data-en="Typography" data-ar="ÿßŸÑÿÆÿ∑Ÿàÿ∑">Typography</h4>
            <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;" data-en="Font Family" data-ar="ÿπÿßÿ¶ŸÑÿ© ÿßŸÑÿÆÿ∑">Font Family</label>
                <select class="font-selector" id="font-family" onchange="updateCustomization()">
                    <option value="Inter">Inter (Default)</option>
                    <option value="Playfair Display">Playfair Display</option>
                    <option value="Poppins">Poppins</option>
                    <option value="Dancing Script">Dancing Script</option>
                    <option value="Roboto">Roboto</option>
                </select>
            </div>
            <div style="margin-top: 1rem;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;" data-en="Font Size" data-ar="ÿ≠ÿ¨ŸÖ ÿßŸÑÿÆÿ∑">Font Size</label>
                <input type="range" class="slider" id="font-size" min="12" max="24" value="16" onchange="updateCustomization()">
                <div style="text-align: center; color: #6b7280; margin-top: 0.5rem;"><span id="font-size-value">16</span>px</div>
            </div>
        </div>

        <div style="margin-bottom: 2rem;">
            <h4 style="margin-bottom: 1rem; font-weight: 600;" data-en="Layout" data-ar="ÿßŸÑÿ™ÿÆÿ∑Ÿäÿ∑">Layout</h4>
            <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;" data-en="Spacing" data-ar="ÿßŸÑÿ™ÿ®ÿßÿπÿØ">Spacing</label>
                <input type="range" class="slider" id="spacing" min="10" max="30" value="20" onchange="updateCustomization()">
                <div style="text-align: center; color: #6b7280; margin-top: 0.5rem;"><span id="spacing-value">20</span>px</div>
            </div>
        </div>

        <button class="btn btn-secondary" onclick="resetCustomization()" style="width: 100%; margin-bottom: 1rem;" data-en="Reset to Default" data-ar="ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿ•ŸÑŸâ ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä">Reset to Default</button>
        <button class="btn btn-ghost" onclick="toggleCustomization()" style="width: 100%;" data-en="Close" data-ar="ÿ•ÿ∫ŸÑÿßŸÇ">Close</button>
    </div>

    <!-- Item Edit Modal -->
    <div id="item-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 style="margin-bottom: 1.5rem; font-weight: 700;" data-en="Edit Menu Item" data-ar="ÿ™ÿ≠ÿ±Ÿäÿ± ÿπŸÜÿµÿ± ÿßŸÑŸÇÿßÿ¶ŸÖÿ©">Edit Menu Item</h3>
            <form id="item-form">
                <div class="form-group">
                    <label class="form-label" data-en="Item Name" data-ar="ÿßÿ≥ŸÖ ÿßŸÑÿπŸÜÿµÿ±">Item Name</label>
                    <input type="text" class="form-input" id="item-name" required>
                </div>
                <div class="form-group">
                    <label class="form-label" data-en="Description" data-ar="ÿßŸÑŸàÿµŸÅ">Description</label>
                    <textarea class="form-input" id="item-description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" data-en="Price" data-ar="ÿßŸÑÿ≥ÿπÿ±">Price</label>
                    <input type="text" class="form-input" id="item-price" placeholder="$12.99" required>
                </div>
                <div class="form-group">
                    <label class="form-label" data-en="Image URL" data-ar="ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿµŸàÿ±ÿ©">Image URL</label>
                    <input type="url" class="form-input" id="item-image" placeholder="https://example.com/image.jpg">
                </div>
                <div class="form-group">
                    <label class="form-label" data-en="3D Model URL (.glb)" data-ar="ÿ±ÿßÿ®ÿ∑ ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨ ÿ´ŸÑÿßÿ´Ÿä ÿßŸÑÿ£ÿ®ÿπÿßÿØ (.glb)">3D Model URL (.glb)</label>
                    <input type="url" class="form-input" id="item-model" placeholder="https://example.com/model.glb">
                </div>
                <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button type="submit" class="btn btn-primary" style="flex: 1;" data-en="Save Item" data-ar="ÿ≠ŸÅÿ∏ ÿßŸÑÿπŸÜÿµÿ±">Save Item</button>
                    <button type="button" class="btn btn-secondary" onclick="closeItemModal()" data-en="Cancel" data-ar="ÿ•ŸÑÿ∫ÿßÿ°">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script type="text/babel">
        // Global state
        let currentLanguage = 'en';
        let currentUser = null;
        let currentTemplate = 'light';
        let menuData = {
            restaurantName: 'Your Restaurant Name',
            menuTitle: 'Menu',
            tagline: 'Fine dining experience',
            sections: [
                {
                    id: 1,
                    name: 'Sample Section',
                    items: [
                        {
                            id: 1,
                            name: 'Sample Dish',
                            description: 'Click to edit this item',
                            price: '$12',
                            image: '',
                            model: ''
                        }
                    ]
                }
            ]
        };
        let currentEditingItem = null;
        let customization = {
            bgColor: '#ffffff',
            textColor: '#1f2937',
            accentColor: '#3b82f6',
            itemBgColor: '#f8fafc',
            fontFamily: 'Inter',
            fontSize: 16,
            spacing: 20
        };

        // Template configurations
        const templates = {
            dark: {
                bgColor: '#0f172a',
                textColor: '#ffffff',
                accentColor: '#8b5cf6',
                itemBgColor: '#1e293b'
            },
            light: {
                bgColor: '#ffffff',
                textColor: '#1e293b',
                accentColor: '#3b82f6',
                itemBgColor: '#f8fafc'
            },
            vibrant: {
                bgColor: '#fff5f5',
                textColor: '#7c2d12',
                accentColor: '#dc2626',
                itemBgColor: '#ffffff'
            },
            luxury: {
                bgColor: '#fffbeb',
                textColor: '#7c2d12',
                accentColor: '#d97706',
                itemBgColor: '#ffffff'
            },
            nature: {
                bgColor: '#f0fdf4',
                textColor: '#14532d',
                accentColor: '#16a34a',
                itemBgColor: '#ffffff'
            },
            ocean: {
                bgColor: '#eff6ff',
                textColor: '#1e3a8a',
                accentColor: '#2563eb',
                itemBgColor: '#ffffff'
            }
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            updateLanguage();
            applyTemplate();
        });

        // Language functions
        function toggleLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'ar' : 'en';
            updateLanguage();
        }

        function updateLanguage() {
            const elements = document.querySelectorAll('[data-en][data-ar]');
            elements.forEach(el => {
                el.textContent = el.getAttribute('data-' + currentLanguage);
            });
            
            document.querySelector('#lang-text').textContent = 
                currentLanguage === 'en' ? 'üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©' : 'üá∫üá∏ English';
            
            document.body.classList.toggle('rtl', currentLanguage === 'ar');
        }

        // Authentication functions
        function showAuthModal() {
            document.getElementById('auth-modal').classList.add('show');
        }

        function hideAuthModal() {
            document.getElementById('auth-modal').classList.remove('show');
        }

        function switchAuthTab(tab) {
            document.querySelectorAll('#auth-tabs .nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
            
            if (tab === 'login') {
                document.getElementById('login-form').classList.remove('hidden');
                document.getElementById('signup-form').classList.add('hidden');
            } else {
                document.getElementById('login-form').classList.add('hidden');
                document.getElementById('signup-form').classList.remove('hidden');
            }
        }

        function continueAsGuest() {
            currentUser = { name: 'Guest User', email: 'guest@menucraft.com' };
            showApp();
        }

        function showApp() {
            document.getElementById('landing-page').style.display = 'none';
            document.getElementById('app-interface').classList.add('show');
            document.getElementById('user-name').textContent = currentUser.name;
            hideAuthModal();
        }

        // Handle form submissions
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = this.querySelector('input[type="email"]').value;
            currentUser = { name: email.split('@')[0], email: email };
            showToast('Welcome back!');
            showApp();
        });

        document.getElementById('signup-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = this.querySelector('input[type="text"]').value;
            const email = this.querySelector('input[type="email"]').value;
            currentUser = { name: name, email: email };
            showToast('Account created successfully!');
            showApp();
        });

        // App navigation
        function switchTab(tab) {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.getElementById('templates-section').classList.toggle('hidden', tab !== 'templates');
            document.getElementById('editor-section').classList.toggle('hidden', tab !== 'editor');
            document.getElementById('preview-section').classList.toggle('hidden', tab !== 'preview');
            
            if (tab === 'preview') {
                updateFinalPreview();
            }
        }

        // Template functions
        function selectTemplate(templateId) {
            currentTemplate = templateId;
            customization = { ...customization, ...templates[templateId] };
            applyTemplate();
            showToast('Template applied successfully!');
            
            // Auto-switch to editor
            setTimeout(() => {
                switchTab('editor');
                document.querySelector('[onclick="switchTab(\'editor\')"]').classList.add('active');
                document.querySelector('[onclick="switchTab(\'templates\')"]').classList.remove('active');
            }, 500);
        }

        function applyTemplate() {
            const preview = document.getElementById('menu-preview');
            preview.style.setProperty('--preview-bg', customization.bgColor);
            preview.style.setProperty('--preview-text', customization.textColor);
            preview.style.setProperty('--accent-color', customization.accentColor);
            preview.style.setProperty('--item-bg', customization.itemBgColor);
            preview.style.fontFamily = customization.fontFamily;
            
            updateCustomizationInputs();
        }

        function updateCustomizationInputs() {
            document.getElementById('bg-color').value = customization.bgColor;
            document.getElementById('text-color').value = customization.textColor;
            document.getElementById('accent-color').value = customization.accentColor;
            document.getElementById('item-bg-color').value = customization.itemBgColor;
            document.getElementById('font-family').value = customization.fontFamily;
            document.getElementById('font-size').value = customization.fontSize;
            document.getElementById('spacing').value = customization.spacing;
            document.getElementById('font-size-value').textContent = customization.fontSize;
            document.getElementById('spacing-value').textContent = customization.spacing;
        }

        // Preview functions
        function updatePreview() {
            const restaurantName = document.getElementById('restaurant-name').value || 'Your Restaurant Name';
            const menuTitle = document.getElementById('menu-title').value || 'Menu';
            const tagline = document.getElementById('menu-tagline').value || 'Fine dining experience';
            
            document.getElementById('preview-restaurant').textContent = restaurantName;
            document.getElementById('preview-title').textContent = menuTitle;
            document.getElementById('preview-tagline').textContent = tagline;
            
            menuData.restaurantName = restaurantName;
            menuData.menuTitle = menuTitle;
            menuData.tagline = tagline;
        }

        function updateFinalPreview() {
            const finalPreview = document.getElementById('final-preview');
            const currentPreview = document.getElementById('menu-preview');
            finalPreview.innerHTML = currentPreview.innerHTML;
            finalPreview.style.cssText = currentPreview.style.cssText;
        }

        // Menu editing functions
        function addSection() {
            const newSection = {
                id: Date.now(),
                name: 'New Section',
                items: []
            };
            menuData.sections.push(newSection);
            renderSections();
            showToast('Section added!');
        }

        function addItem(button) {
            currentEditingItem = null;
            showItemModal();
        }

        function editItem(itemElement) {
            const itemName = itemElement.querySelector('.item-name').textContent;
            const itemDescription = itemElement.querySelector('.item-description').textContent;
            const itemPrice = itemElement.querySelector('.item-price').textContent;
            
            currentEditingItem = { name: itemName, description: itemDescription, price: itemPrice };
            
            document.getElementById('item-name').value = itemName;
            document.getElementById('item-description').value = itemDescription;
            document.getElementById('item-price').value = itemPrice;
            
            showItemModal();
        }

        function showItemModal() {
            document.getElementById('item-modal').classList.add('show');
        }

        function closeItemModal() {
            document.getElementById('item-modal').classList.remove('show');
            currentEditingItem = null;
        }

        // Handle item form submission
        document.getElementById('item-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const itemData = {
                name: document.getElementById('item-name').value,
                description: document.getElementById('item-description').value,
                price: document.getElementById('item-price').value,
                image: document.getElementById('item-image').value,
                model: document.getElementById('item-model').value
            };
            
            if (currentEditingItem) {
                // Update existing item
                showToast('Item updated!');
            } else {
                // Add new item
                showToast('Item added!');
            }
            
            closeItemModal();
            updatePreview();
        });

        // Customization functions
        function toggleCustomization() {
            document.getElementById('customization-panel').classList.toggle('open');
        }

        function updateCustomization() {
            customization.bgColor = document.getElementById('bg-color').value;
            customization.textColor = document.getElementById('text-color').value;
            customization.accentColor = document.getElementById('accent-color').value;
            customization.itemBgColor = document.getElementById('item-bg-color').value;
            customization.fontFamily = document.getElementById('font-family').value;
            customization.fontSize = document.getElementById('font-size').value;
            customization.spacing = document.getElementById('spacing').value;
            
            document.getElementById('font-size-value').textContent = customization.fontSize;
            document.getElementById('spacing-value').textContent = customization.spacing;
            
            applyTemplate();
        }

        function resetCustomization() {
            customization = { ...templates[currentTemplate] };
            customization.fontFamily = 'Inter';
            customization.fontSize = 16;
            customization.spacing = 20;
            
            updateCustomizationInputs();
            applyTemplate();
            showToast('Design reset to template defaults');
        }

        // Utility functions
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        function saveMenu() {
            const menuToSave = {
                ...menuData,
                customization: customization,
                template: currentTemplate
            };
            
            localStorage.setItem('menucraft-menu', JSON.stringify(menuToSave));
            showToast('Menu saved successfully!');
        }

        // Load saved menu on page load
        function loadSavedMenu() {
            const saved = localStorage.getItem('menucraft-menu');
            if (saved) {
                const data = JSON.parse(saved);
                menuData = data;
                customization = data.customization || customization;
                currentTemplate = data.template || 'light';
                
                document.getElementById('restaurant-name').value = menuData.restaurantName;
                document.getElementById('menu-title').value = menuData.menuTitle;
                document.getElementById('menu-tagline').value = menuData.tagline;
                
                updatePreview();
                applyTemplate();
            }
        }

        // Mobile responsiveness
        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('open');
        }

        // Add mobile menu button for small screens
        window.addEventListener('resize', function() {
            if (window.innerWidth <= 768) {
                if (!document.querySelector('.mobile-menu-btn')) {
                    const menuBtn = document.createElement('button');
                    menuBtn.className = 'btn btn-primary mobile-menu-btn';
                    menuBtn.textContent = '‚ò∞';
                    menuBtn.style.cssText = 'position: fixed; top: 20px; left: 20px; z-index: 100; display: block;';
                    menuBtn.onclick = toggleSidebar;
                    document.body.appendChild(menuBtn);
                }
            } else {
                const menuBtn = document.querySelector('.mobile-menu-btn');
                if (menuBtn) menuBtn.remove();
            }
        });

        // Auto-save functionality
        setInterval(() => {
            if (currentUser) {
                saveMenu();
            }
        }, 30000); // Auto-save every 30 seconds

        // Load menu when app starts
        setTimeout(loadSavedMenu, 1000);
    </script>
</body>
</html>
