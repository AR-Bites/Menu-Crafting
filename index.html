<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant Menu Builder - Create Beautiful Digital Menus</title>
    <meta name="description" content="Create stunning restaurant menus with drag-and-drop interface, 3D models, multilingual support, and QR code generation. Perfect for modern restaurants.">
    
    <!-- External Dependencies -->
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/localforage/1.10.0/localforage.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+Arabic:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .rtl {
            direction: rtl;
            font-family: 'Noto Sans Arabic', sans-serif;
        }
        
        .font-serif {
            font-family: 'Playfair Display', serif;
        }
        
        .font-sans {
            font-family: system-ui, -apple-system, sans-serif;
        }

        /* Gentle hover effects */
        .enhanced-hover {
            transition: all 0.3s ease;
        }

        .enhanced-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        /* Smooth RTL/LTR transitions */
        .rtl-smooth {
            transition: all 0.3s ease;
        }

        /* Gentle fade-in animation */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .template-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .template-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        .menu-item {
            transition: all 0.2s ease;
        }
        
        .menu-item:hover {
            background-color: #f8fafc;
            transform: scale(1.01);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s ease;
            cursor: pointer;
            border: none;
            outline: none;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
            transform: translateY(-1px);
        }
        
        .btn-secondary {
            background: white;
            color: #374151;
            border: 1px solid #d1d5db;
        }
        
        .btn-secondary:hover {
            background: #f9fafb;
            border-color: #9ca3af;
        }
        
        .btn-ghost {
            background: transparent;
            color: #6b7280;
        }
        
        .btn-ghost:hover {
            background: rgba(0,0,0,0.05);
            color: #374151;
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: white;
            padding: 24px;
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .input {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.2s ease;
        }
        
        .input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        .language-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 8px 16px;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            z-index: 100;
        }
        
        .language-toggle:hover {
            background: white;
            transform: scale(1.05);
        }
        
        .loading-spinner {
            width: 16px;
            height: 16px;
            border: 2px solid #e5e7eb;
            border-top: 2px solid #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 16px 20px;
            border-radius: 8px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            z-index: 1001;
            animation: slideInToast 0.3s ease-out;
        }
        
        @keyframes slideInToast {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .toast-success {
            border-left: 4px solid #10b981;
        }
        
        .toast-error {
            border-left: 4px solid #ef4444;
        }

        /* Mobile-first responsive design */
        @media (max-width: 768px) {
            body {
                font-size: 16px;
            }
            
            .btn {
                padding: 14px 20px;
                font-size: 16px;
                min-height: 48px;
                border-radius: 10px;
            }
            
            .input {
                padding: 14px;
                font-size: 16px;
                min-height: 48px;
                border-radius: 10px;
            }
            
            .textarea {
                min-height: 100px;
                padding: 14px;
                font-size: 16px;
            }
            
            .modal-content {
                padding: 20px;
                margin: 10px;
                border-radius: 16px;
                max-height: 90vh;
            }
            
            .template-card {
                padding: 20px;
                margin-bottom: 16px;
            }
            
            .template-card h3 {
                font-size: 18px;
            }
            
            .language-toggle {
                padding: 12px 20px;
                font-size: 16px;
                top: 15px;
                right: 15px;
            }
            
            /* Mobile sidebar */
            .mobile-sidebar {
                position: fixed;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100vh;
                background: white;
                z-index: 1000;
                transition: left 0.3s ease;
                overflow-y: auto;
            }
            
            .mobile-sidebar.open {
                left: 0;
            }
            
            .mobile-menu-button {
                display: block;
                position: fixed;
                top: 15px;
                left: 15px;
                z-index: 1001;
                background: rgba(255, 255, 255, 0.9);
                backdrop-filter: blur(10px);
                border: none;
                padding: 12px;
                border-radius: 12px;
                font-size: 18px;
                cursor: pointer;
            }
            
            /* Mobile grid adjustments */
            .grid-mobile-1 {
                grid-template-columns: 1fr !important;
                gap: 16px !important;
            }
            
            .grid-mobile-2 {
                grid-template-columns: 1fr 1fr !important;
                gap: 12px !important;
            }
            
            /* Auth form mobile */
            .auth-container {
                padding: 20px !important;
                max-width: 100% !important;
                margin: 20px !important;
            }
            
            /* Preview adjustments */
            .mobile-preview {
                padding: 16px !important;
            }
            
            .mobile-preview .menu-item {
                padding: 16px !important;
                margin: 12px 0 !important;
            }
            
            /* Touch-friendly spacing */
            .mobile-spacing {
                margin: 16px 0;
            }
            
            .mobile-button-group {
                display: flex;
                flex-direction: column;
                gap: 12px;
            }
            
            .mobile-button-group .btn {
                width: 100%;
            }
        }
        
        @media (min-width: 769px) {
            .mobile-menu-button {
                display: none;
            }
            
            .desktop-sidebar {
                position: relative !important;
                left: 0 !important;
                width: 320px !important;
            }
        }

        /* Auth styles */
        .auth-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .auth-card {
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
        }
        
        .auth-header {
            text-align: center;
            margin-bottom: 32px;
        }
        
        .auth-title {
            font-size: 28px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 8px;
        }
        
        .auth-subtitle {
            color: #6b7280;
            font-size: 16px;
        }
        
        .auth-form {
            space-y: 20px;
        }
        
        .auth-field {
            margin-bottom: 20px;
        }
        
        .auth-label {
            display: block;
            font-weight: 500;
            color: #374151;
            margin-bottom: 8px;
        }
        
        .auth-toggle {
            text-align: center;
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid #e5e7eb;
        }
        
        .auth-link {
            color: #3b82f6;
            text-decoration: none;
            font-weight: 500;
        }
        
        .auth-link:hover {
            color: #2563eb;
        }
        
        .guest-option {
            text-align: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e5e7eb;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useContext, createContext, useRef } = React;

        // Simple Storage Utility
        const storage = {
            save: (key, data) => localStorage.setItem(key, JSON.stringify(data)),
            load: (key) => {
                try {
                    return JSON.parse(localStorage.getItem(key));
                } catch {
                    return null;
                }
            },
            remove: (key) => localStorage.removeItem(key)
        };

        // Language Context
        const LanguageContext = createContext();

        const translations = {
            en: {
                // Auth translations
                login: 'Login',
                signup: 'Sign Up',
                email: 'Email',
                password: 'Password',
                confirmPassword: 'Confirm Password',
                fullName: 'Full Name',
                continueAsGuest: 'Continue as Guest',
                welcome: 'Welcome to Menu Builder',
                createAccount: 'Create your account',
                alreadyHaveAccount: 'Already have an account?',
                dontHaveAccount: "Don't have an account?",
                
                // Menu builder translations
                menuBuilder: 'Menu Builder',
                selectTemplate: 'Select Template',
                modern: 'Modern',
                elegant: 'Elegant',
                casual: 'Casual',
                premium: 'Premium',
                useTemplate: 'Use Template',
                customize: 'Customize',
                restaurantName: 'Restaurant Name',
                menuTitle: 'Menu Title',
                tagline: 'Tagline',
                addSection: 'Add Section',
                addItem: 'Add Item',
                sectionName: 'Section Name',
                itemName: 'Item Name',
                price: 'Price',
                description: 'Description',
                save: 'Save',
                cancel: 'Cancel',
                publish: 'Publish',
                preview: 'Preview',
                desktop: 'Desktop',
                tablet: 'Tablet',
                mobile: 'Mobile',
                back: 'Back',
                edit: 'Edit',
                delete: 'Delete',
                saving: 'Saving...',
                saved: 'Saved successfully!',
                published: 'Menu published!',
                shareUrl: 'Share URL',
                qrCode: 'QR Code',
                close: 'Close',
                apply: 'Apply'
            },
            ar: {
                // Auth translations
                login: 'تسجيل الدخول',
                signup: 'إنشاء حساب',
                email: 'البريد الإلكتروني',
                password: 'كلمة المرور',
                confirmPassword: 'تأكيد كلمة المرور',
                fullName: 'الاسم الكامل',
                continueAsGuest: 'متابعة كضيف',
                welcome: 'مرحباً بك في منشئ القوائم',
                createAccount: 'إنشاء حسابك',
                alreadyHaveAccount: 'لديك حساب بالفعل؟',
                dontHaveAccount: 'ليس لديك حساب؟',
                
                // Menu builder translations
                menuBuilder: 'منشئ القائمة',
                selectTemplate: 'اختر قالب',
                modern: 'عصري',
                elegant: 'أنيق',
                casual: 'عادي',
                premium: 'مميز',
                useTemplate: 'استخدم القالب',
                customize: 'تخصيص',
                restaurantName: 'اسم المطعم',
                menuTitle: 'عنوان القائمة',
                tagline: 'الشعار',
                addSection: 'إضافة قسم',
                addItem: 'إضافة عنصر',
                sectionName: 'اسم القسم',
                itemName: 'اسم العنصر',
                price: 'السعر',
                description: 'الوصف',
                save: 'حفظ',
                cancel: 'إلغاء',
                publish: 'نشر',
                preview: 'معاينة',
                desktop: 'سطح المكتب',
                tablet: 'جهاز لوحي',
                mobile: 'جوال',
                back: 'رجوع',
                edit: 'تحرير',
                delete: 'حذف',
                saving: 'جاري الحفظ...',
                saved: 'تم الحفظ بنجاح!',
                published: 'تم نشر القائمة!',
                shareUrl: 'رابط المشاركة',
                qrCode: 'رمز الاستجابة السريعة',
                close: 'إغلاق',
                apply: 'تطبيق'
            }
        };

        function LanguageProvider({ children }) {
            const [language, setLanguage] = useState('en');

            const toggleLanguage = () => {
                setLanguage(prev => prev === 'en' ? 'ar' : 'en');
            };

            const t = (key) => translations[language][key] || key;

            return React.createElement(LanguageContext.Provider, {
                value: { language, toggleLanguage, t, isRTL: language === 'ar' }
            }, children);
        }

        function useLanguage() {
            const context = useContext(LanguageContext);
            if (!context) {
                throw new Error('useLanguage must be used within LanguageProvider');
            }
            return context;
        }

        // Toast Context
        const ToastContext = createContext();

        function ToastProvider({ children }) {
            const [toasts, setToasts] = useState([]);

            const addToast = (message, type = 'success') => {
                const id = Date.now();
                setToasts(prev => [...prev, { id, message, type }]);
                setTimeout(() => removeToast(id), 3000);
            };

            const removeToast = (id) => {
                setToasts(prev => prev.filter(toast => toast.id !== id));
            };

            return React.createElement(ToastContext.Provider, {
                value: { addToast, removeToast }
            }, children);
        }

        function useToast() {
            const context = useContext(ToastContext);
            if (!context) {
                throw new Error('useToast must be used within ToastProvider');
            }
            return context;
        }

        // Templates Data with Eye-catching Designs
        const templates = [
            {
                id: 1,
                name: 'Modern Dark',
                category: 'modern',
                gradient: 'from-gray-900 via-purple-900 to-black',
                bgColor: '#1a1a1a',
                textColor: '#ffffff',
                accentColor: '#8b5cf6',
                description: 'Sleek dark theme with purple accents',
                preview: {
                    headerBg: 'linear-gradient(135deg, #1a1a1a 0%, #8b5cf6 100%)',
                    itemBg: '#2d2d2d',
                    borderColor: '#8b5cf6'
                }
            },
            {
                id: 2,
                name: 'Minimalist Light',
                category: 'elegant',
                gradient: 'from-white to-gray-100',
                bgColor: '#ffffff',
                textColor: '#1f2937',
                accentColor: '#3b82f6',
                description: 'Ultra-clean minimalist design',
                preview: {
                    headerBg: 'linear-gradient(135deg, #ffffff 0%, #f3f4f6 100%)',
                    itemBg: '#ffffff',
                    borderColor: '#e5e7eb'
                }
            },
            {
                id: 3,
                name: 'Vibrant Food Focus',
                category: 'casual',
                gradient: 'from-orange-400 via-red-500 to-pink-500',
                bgColor: '#fff7ed',
                textColor: '#7c2d12',
                accentColor: '#ea580c',
                description: 'Bold colors showcasing delicious dishes',
                preview: {
                    headerBg: 'linear-gradient(135deg, #ea580c 0%, #dc2626 100%)',
                    itemBg: '#fff7ed',
                    borderColor: '#fed7aa'
                }
            },
            {
                id: 4,
                name: 'Luxury Gold',
                category: 'premium',
                gradient: 'from-amber-700 via-yellow-600 to-amber-500',
                bgColor: '#fffbeb',
                textColor: '#78350f',
                accentColor: '#d97706',
                description: 'Sophisticated gold and cream luxury theme',
                preview: {
                    headerBg: 'linear-gradient(135deg, #78350f 0%, #d97706 100%)',
                    itemBg: '#fffbeb',
                    borderColor: '#fde68a'
                }
            },
            {
                id: 5,
                name: 'Fresh Green',
                category: 'casual',
                gradient: 'from-green-600 to-emerald-500',
                bgColor: '#f0fdf4',
                textColor: '#14532d',
                accentColor: '#16a34a',
                description: 'Fresh and natural green theme',
                preview: {
                    headerBg: 'linear-gradient(135deg, #16a34a 0%, #059669 100%)',
                    itemBg: '#f0fdf4',
                    borderColor: '#bbf7d0'
                }
            },
            {
                id: 6,
                name: 'Ocean Blue',
                category: 'elegant',
                gradient: 'from-blue-800 to-indigo-600',
                bgColor: '#eff6ff',
                textColor: '#1e3a8a',
                accentColor: '#2563eb',
                description: 'Deep ocean blue with wave-like elegance',
                preview: {
                    headerBg: 'linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%)',
                    itemBg: '#eff6ff',
                    borderColor: '#bfdbfe'
                }
            }
        ];

        // Authentication Component
        function AuthScreen({ onAuthenticated }) {
            const { t, isRTL } = useLanguage();
            const { addToast } = useToast();
            const [isLogin, setIsLogin] = useState(true);
            const [isLoading, setIsLoading] = useState(false);
            const [formData, setFormData] = useState({
                email: '',
                password: '',
                confirmPassword: '',
                fullName: ''
            });

            const handleSubmit = async (e) => {
                e.preventDefault();
                setIsLoading(true);

                // Simulate authentication
                await new Promise(resolve => setTimeout(resolve, 1500));

                if (!isLogin && formData.password !== formData.confirmPassword) {
                    addToast('Passwords do not match', 'error');
                    setIsLoading(false);
                    return;
                }

                // Store user data
                const userData = {
                    email: formData.email,
                    name: formData.fullName || formData.email.split('@')[0],
                    authenticated: true
                };
                storage.save('currentUser', userData);
                
                addToast(isLogin ? 'Logged in successfully!' : 'Account created successfully!');
                setIsLoading(false);
                onAuthenticated(userData);
            };

            const handleGuestContinue = () => {
                const guestData = {
                    email: 'guest@menubuilder.com',
                    name: 'Guest User',
                    authenticated: false
                };
                storage.save('currentUser', guestData);
                onAuthenticated(guestData);
            };

            return React.createElement('div', {
                className: `auth-container ${isRTL ? 'rtl' : ''}`
            }, React.createElement('div', {
                className: 'auth-card fade-in',
                dir: isRTL ? 'rtl' : 'ltr'
            }, [
                React.createElement('div', {
                    key: 'header',
                    className: 'auth-header'
                }, [
                    React.createElement('h1', {
                        key: 'title',
                        className: 'auth-title'
                    }, t('welcome')),
                    React.createElement('p', {
                        key: 'subtitle',
                        className: 'auth-subtitle'
                    }, isLogin ? 'Sign in to your account' : t('createAccount'))
                ]),

                React.createElement('form', {
                    key: 'form',
                    className: 'auth-form',
                    onSubmit: handleSubmit
                }, [
                    !isLogin && React.createElement('div', {
                        key: 'fullName',
                        className: 'auth-field'
                    }, [
                        React.createElement('label', {
                            key: 'label',
                            className: 'auth-label'
                        }, t('fullName')),
                        React.createElement('input', {
                            key: 'input',
                            type: 'text',
                            className: 'input w-full',
                            value: formData.fullName,
                            onChange: (e) => setFormData(prev => ({ ...prev, fullName: e.target.value })),
                            required: !isLogin
                        })
                    ]),

                    React.createElement('div', {
                        key: 'email',
                        className: 'auth-field'
                    }, [
                        React.createElement('label', {
                            key: 'label',
                            className: 'auth-label'
                        }, t('email')),
                        React.createElement('input', {
                            key: 'input',
                            type: 'email',
                            className: 'input w-full',
                            value: formData.email,
                            onChange: (e) => setFormData(prev => ({ ...prev, email: e.target.value })),
                            required: true
                        })
                    ]),

                    React.createElement('div', {
                        key: 'password',
                        className: 'auth-field'
                    }, [
                        React.createElement('label', {
                            key: 'label',
                            className: 'auth-label'
                        }, t('password')),
                        React.createElement('input', {
                            key: 'input',
                            type: 'password',
                            className: 'input w-full',
                            value: formData.password,
                            onChange: (e) => setFormData(prev => ({ ...prev, password: e.target.value })),
                            required: true
                        })
                    ]),

                    !isLogin && React.createElement('div', {
                        key: 'confirmPassword',
                        className: 'auth-field'
                    }, [
                        React.createElement('label', {
                            key: 'label',
                            className: 'auth-label'
                        }, t('confirmPassword')),
                        React.createElement('input', {
                            key: 'input',
                            type: 'password',
                            className: 'input w-full',
                            value: formData.confirmPassword,
                            onChange: (e) => setFormData(prev => ({ ...prev, confirmPassword: e.target.value })),
                            required: !isLogin
                        })
                    ]),

                    React.createElement('button', {
                        key: 'submit',
                        type: 'submit',
                        className: 'btn btn-primary w-full',
                        disabled: isLoading
                    }, isLoading ? [
                        React.createElement('div', {
                            key: 'spinner',
                            className: 'loading-spinner mr-2'
                        }),
                        isLogin ? 'Signing in...' : 'Creating account...'
                    ] : (isLogin ? t('login') : t('signup')))
                ]),

                React.createElement('div', {
                    key: 'toggle',
                    className: 'auth-toggle'
                }, [
                    React.createElement('p', {
                        key: 'text',
                        className: 'text-sm text-gray-600'
                    }, isLogin ? t('dontHaveAccount') : t('alreadyHaveAccount')),
                    React.createElement('button', {
                        key: 'link',
                        type: 'button',
                        className: 'auth-link ml-1',
                        onClick: () => setIsLogin(!isLogin)
                    }, isLogin ? t('signup') : t('login'))
                ]),

                React.createElement('div', {
                    key: 'guest',
                    className: 'guest-option'
                }, React.createElement('button', {
                    type: 'button',
                    className: 'btn btn-ghost w-full',
                    onClick: handleGuestContinue
                }, t('continueAsGuest')))
            ]));
        }

        // Template Selection Component with Enhanced Previews
        function TemplateSelection({ onSelectTemplate }) {
            const { t, isRTL } = useLanguage();
            const [selectedTemplate, setSelectedTemplate] = useState(null);

            const handleTemplateClick = (template) => {
                setSelectedTemplate(template);
            };

            const handleUseTemplate = () => {
                if (selectedTemplate) {
                    onSelectTemplate(selectedTemplate);
                }
            };

            return React.createElement('div', {
                className: `min-h-screen p-4 md:p-8 ${isRTL ? 'rtl' : ''} fade-in`
            }, [
                React.createElement('div', {
                    key: 'container',
                    className: 'max-w-7xl mx-auto'
                }, [
                    React.createElement('div', {
                        key: 'header',
                        className: 'text-center mb-8 md:mb-12'
                    }, [
                        React.createElement('h1', {
                            key: 'title',
                            className: 'text-3xl md:text-4xl font-bold text-white mb-4'
                        }, t('selectTemplate')),
                        React.createElement('p', {
                            key: 'subtitle',
                            className: 'text-lg md:text-xl text-white opacity-90'
                        }, 'Choose a template that matches your restaurant style')
                    ]),
                    
                    React.createElement('div', {
                        key: 'templates',
                        className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 grid-mobile-1'
                    }, templates.map(template =>
                        React.createElement('div', {
                            key: template.id,
                            className: `template-card bg-white rounded-xl overflow-hidden enhanced-hover cursor-pointer ${
                                selectedTemplate?.id === template.id ? 'ring-4 ring-blue-500' : ''
                            }`,
                            onClick: () => handleTemplateClick(template)
                        }, [
                            // Live Preview
                            React.createElement('div', {
                                key: 'preview',
                                className: 'h-48 md:h-56 relative overflow-hidden',
                                style: { background: template.preview.headerBg }
                            }, [
                                // Header preview
                                React.createElement('div', {
                                    key: 'header',
                                    className: 'p-4 text-center',
                                    style: { color: template.textColor === '#ffffff' ? '#ffffff' : template.textColor }
                                }, [
                                    React.createElement('h3', {
                                        key: 'restaurant',
                                        className: 'text-lg font-bold mb-1'
                                    }, 'Sample Restaurant'),
                                    React.createElement('p', {
                                        key: 'tagline',
                                        className: 'text-sm opacity-80'
                                    }, 'Delicious Food Menu')
                                ]),
                                
                                // Menu items preview
                                React.createElement('div', {
                                    key: 'items',
                                    className: 'px-4 pb-4 space-y-2'
                                }, [
                                    React.createElement('div', {
                                        key: 'item1',
                                        className: 'p-3 rounded-lg',
                                        style: { 
                                            backgroundColor: template.preview.itemBg,
                                            borderLeft: `3px solid ${template.accentColor}`,
                                            color: template.textColor
                                        }
                                    }, [
                                        React.createElement('div', {
                                            key: 'content',
                                            className: 'flex justify-between items-center'
                                        }, [
                                            React.createElement('span', {
                                                key: 'name',
                                                className: 'text-sm font-medium'
                                            }, 'Signature Dish'),
                                            React.createElement('span', {
                                                key: 'price',
                                                className: 'text-sm font-bold',
                                                style: { color: template.accentColor }
                                            }, '$12.99')
                                        ])
                                    ]),
                                    React.createElement('div', {
                                        key: 'item2',
                                        className: 'p-3 rounded-lg',
                                        style: { 
                                            backgroundColor: template.preview.itemBg,
                                            borderLeft: `3px solid ${template.accentColor}`,
                                            color: template.textColor
                                        }
                                    }, [
                                        React.createElement('div', {
                                            key: 'content',
                                            className: 'flex justify-between items-center'
                                        }, [
                                            React.createElement('span', {
                                                key: 'name',
                                                className: 'text-sm font-medium'
                                            }, 'Special Item'),
                                            React.createElement('span', {
                                                key: 'price',
                                                className: 'text-sm font-bold',
                                                style: { color: template.accentColor }
                                            }, '$8.50')
                                        ])
                                    ])
                                ])
                            ]),
                            
                            // Template info
                            React.createElement('div', {
                                key: 'info',
                                className: 'p-4 md:p-6'
                            }, [
                                React.createElement('h3', {
                                    key: 'name',
                                    className: 'text-lg md:text-xl font-semibold mb-2'
                                }, template.name),
                                React.createElement('p', {
                                    key: 'description',
                                    className: 'text-gray-600 text-sm mb-4'
                                }, template.description),
                                React.createElement('span', {
                                    key: 'category',
                                    className: 'inline-block px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium',
                                    style: { backgroundColor: template.accentColor + '20', color: template.accentColor }
                                }, t(template.category))
                            ])
                        ])
                    )),

                    // Use Template Button
                    selectedTemplate && React.createElement('div', {
                        key: 'action',
                        className: 'text-center mt-8'
                    }, React.createElement('button', {
                        className: 'btn btn-primary btn-lg enhanced-hover',
                        onClick: handleUseTemplate
                    }, t('useTemplate') + ` - ${selectedTemplate.name}`))
                ])
            ]);
        }

        // Menu Preview Component with Template Styling
        function MenuPreview({ menu, sections, isDesktop, selectedTemplate }) {
            const { t, language, isRTL } = useLanguage();
            
            const containerClass = isDesktop 
                ? 'max-w-4xl mx-auto' 
                : 'max-w-md mx-auto';
                
            const fontClass = language === 'ar' ? 'font-arabic' : 'font-inter';

            // Get template styling
            const template = selectedTemplate || templates.find(t => t.id === menu.templateId) || templates[0];

            return React.createElement('div', {
                className: `${containerClass} rounded-lg shadow-lg overflow-hidden ${fontClass} rtl-smooth ${isDesktop ? '' : 'mobile-preview'}`,
                dir: language === 'ar' ? 'rtl' : 'ltr',
                style: { backgroundColor: template.bgColor }
            }, [
                React.createElement('div', {
                    key: 'header',
                    className: 'p-4 md:p-8 text-white',
                    style: { background: template.preview.headerBg, color: template.textColor === '#ffffff' ? '#ffffff' : template.textColor }
                }, [
                    React.createElement('h1', {
                        key: 'restaurant-name',
                        className: 'text-3xl font-bold mb-2'
                    }, menu.restaurantName || 'Restaurant Name'),
                    React.createElement('h2', {
                        key: 'menu-title',
                        className: 'text-xl opacity-90 mb-2'
                    }, menu.name || 'Menu'),
                    menu.tagline && React.createElement('p', {
                        key: 'tagline',
                        className: 'opacity-80'
                    }, menu.tagline)
                ]),

                React.createElement('div', {
                    key: 'content',
                    className: 'p-4 md:p-8'
                }, sections.map(section =>
                    React.createElement('div', {
                        key: section.id,
                        className: 'mb-6 md:mb-8 fade-in'
                    }, [
                        React.createElement('h3', {
                            key: 'section-title',
                            className: 'text-xl md:text-2xl font-semibold mb-4',
                            style: { color: template.textColor }
                        }, section.name),
                        
                        section.description && React.createElement('p', {
                            key: 'section-description',
                            className: 'mb-4 md:mb-6 opacity-80',
                            style: { color: template.textColor }
                        }, section.description),

                        React.createElement('div', {
                            key: 'items',
                            className: 'space-y-3 md:space-y-4'
                        }, section.items.map(item =>
                            React.createElement('div', {
                                key: item.id,
                                className: 'menu-item p-3 md:p-4 rounded-lg mobile-spacing',
                                style: { 
                                    backgroundColor: template.preview.itemBg,
                                    borderLeft: `4px solid ${template.accentColor}`,
                                    color: template.textColor
                                }
                            }, [
                                React.createElement('div', {
                                    key: 'item-header',
                                    className: 'flex flex-col md:flex-row md:justify-between md:items-start mb-2'
                                }, [
                                    React.createElement('h4', {
                                        key: 'item-name',
                                        className: 'text-lg md:text-lg font-medium mb-1 md:mb-0',
                                        style: { color: template.textColor }
                                    }, item.name),
                                    React.createElement('span', {
                                        key: 'item-price',
                                        className: 'text-lg font-semibold',
                                        style: { color: template.accentColor }
                                    }, item.price)
                                ]),
                                
                                item.description && React.createElement('p', {
                                    key: 'item-description',
                                    className: 'opacity-75 text-sm md:text-base',
                                    style: { color: template.textColor }
                                }, item.description),

                                item.image && React.createElement('img', {
                                    key: 'item-image',
                                    src: item.image,
                                    alt: item.name,
                                    className: 'mt-3 w-full h-32 md:h-40 object-cover rounded-lg'
                                }),

                                item.model3d && React.createElement('div', {
                                    key: 'item-3d',
                                    className: 'mt-3'
                                }, React.createElement('model-viewer', {
                                    src: item.model3d,
                                    alt: item.name,
                                    'auto-rotate': true,
                                    'camera-controls': true,
                                    style: { width: '100%', height: isDesktop ? '200px' : '150px' }
                                }))
                            ])
                        ))
                    ])
                ))
            ]);
        }

        // Modal Components
        function Modal({ isOpen, onClose, children }) {
            if (!isOpen) return null;

            return React.createElement('div', {
                className: 'modal-overlay',
                onClick: onClose
            }, React.createElement('div', {
                className: 'modal-content fade-in',
                onClick: (e) => e.stopPropagation()
            }, children));
        }

        function ItemModal({ isOpen, onClose, item, onSave }) {
            const { t } = useLanguage();
            const [formData, setFormData] = useState({
                name: '',
                nameAr: '',
                description: '',
                descriptionAr: '',
                price: '',
                image: '',
                model3d: ''
            });

            useEffect(() => {
                if (item) {
                    setFormData(item);
                } else {
                    setFormData({
                        name: '',
                        nameAr: '',
                        description: '',
                        descriptionAr: '',
                        price: '',
                        image: '',
                        model3d: ''
                    });
                }
            }, [item]);

            const handleSubmit = (e) => {
                e.preventDefault();
                onSave(formData);
                onClose();
            };

            return React.createElement(Modal, {
                isOpen,
                onClose
            }, [
                React.createElement('h2', {
                    key: 'title',
                    className: 'text-xl font-semibold mb-4'
                }, item ? 'Edit Item' : 'Add Item'),

                React.createElement('form', {
                    key: 'form',
                    onSubmit: handleSubmit,
                    className: 'space-y-4'
                }, [
                    React.createElement('div', {
                        key: 'name-group',
                        className: 'grid grid-cols-2 gap-4'
                    }, [
                        React.createElement('div', { key: 'name-en' }, [
                            React.createElement('label', {
                                key: 'label',
                                className: 'block text-sm font-medium mb-1'
                            }, 'Name (English)'),
                            React.createElement('input', {
                                key: 'input',
                                type: 'text',
                                className: 'input',
                                value: formData.name,
                                onChange: (e) => setFormData(prev => ({ ...prev, name: e.target.value })),
                                required: true
                            })
                        ]),
                        React.createElement('div', { key: 'name-ar' }, [
                            React.createElement('label', {
                                key: 'label',
                                className: 'block text-sm font-medium mb-1'
                            }, 'Name (Arabic)'),
                            React.createElement('input', {
                                key: 'input',
                                type: 'text',
                                className: 'input',
                                value: formData.nameAr,
                                onChange: (e) => setFormData(prev => ({ ...prev, nameAr: e.target.value }))
                            })
                        ])
                    ]),

                    React.createElement('div', { key: 'price' }, [
                        React.createElement('label', {
                            key: 'label',
                            className: 'block text-sm font-medium mb-1'
                        }, t('price')),
                        React.createElement('input', {
                            key: 'input',
                            type: 'text',
                            className: 'input',
                            value: formData.price,
                            onChange: (e) => setFormData(prev => ({ ...prev, price: e.target.value })),
                            required: true
                        })
                    ]),

                    React.createElement('div', {
                        key: 'description-group',
                        className: 'grid grid-cols-2 gap-4'
                    }, [
                        React.createElement('div', { key: 'desc-en' }, [
                            React.createElement('label', {
                                key: 'label',
                                className: 'block text-sm font-medium mb-1'
                            }, 'Description (English)'),
                            React.createElement('textarea', {
                                key: 'input',
                                className: 'input textarea',
                                value: formData.description,
                                onChange: (e) => setFormData(prev => ({ ...prev, description: e.target.value }))
                            })
                        ]),
                        React.createElement('div', { key: 'desc-ar' }, [
                            React.createElement('label', {
                                key: 'label',
                                className: 'block text-sm font-medium mb-1'
                            }, 'Description (Arabic)'),
                            React.createElement('textarea', {
                                key: 'input',
                                className: 'input textarea',
                                value: formData.descriptionAr,
                                onChange: (e) => setFormData(prev => ({ ...prev, descriptionAr: e.target.value }))
                            })
                        ])
                    ]),

                    React.createElement('div', { key: 'image' }, [
                        React.createElement('label', {
                            key: 'label',
                            className: 'block text-sm font-medium mb-1'
                        }, 'Image URL'),
                        React.createElement('input', {
                            key: 'input',
                            type: 'url',
                            className: 'input',
                            value: formData.image,
                            onChange: (e) => setFormData(prev => ({ ...prev, image: e.target.value }))
                        })
                    ]),

                    React.createElement('div', { key: '3d-model' }, [
                        React.createElement('label', {
                            key: 'label',
                            className: 'block text-sm font-medium mb-1'
                        }, '3D Model URL (.glb)'),
                        React.createElement('input', {
                            key: 'input',
                            type: 'url',
                            className: 'input',
                            value: formData.model3d,
                            onChange: (e) => setFormData(prev => ({ ...prev, model3d: e.target.value }))
                        })
                    ]),

                    React.createElement('div', {
                        key: 'buttons',
                        className: 'flex gap-3 pt-4'
                    }, [
                        React.createElement('button', {
                            key: 'cancel',
                            type: 'button',
                            className: 'btn btn-secondary flex-1',
                            onClick: onClose
                        }, t('cancel')),
                        React.createElement('button', {
                            key: 'save',
                            type: 'submit',
                            className: 'btn btn-primary flex-1'
                        }, t('save'))
                    ])
                ])
            ]);
        }

        function SectionModal({ isOpen, onClose, section, onSave }) {
            const { t } = useLanguage();
            const [formData, setFormData] = useState({
                name: '',
                nameAr: '',
                description: '',
                descriptionAr: ''
            });

            useEffect(() => {
                if (section) {
                    setFormData(section);
                } else {
                    setFormData({
                        name: '',
                        nameAr: '',
                        description: '',
                        descriptionAr: ''
                    });
                }
            }, [section]);

            const handleSubmit = (e) => {
                e.preventDefault();
                onSave(formData);
                onClose();
            };

            return React.createElement(Modal, {
                isOpen,
                onClose
            }, [
                React.createElement('h2', {
                    key: 'title',
                    className: 'text-xl font-semibold mb-4'
                }, section ? 'Edit Section' : 'Add Section'),

                React.createElement('form', {
                    key: 'form',
                    onSubmit: handleSubmit,
                    className: 'space-y-4'
                }, [
                    React.createElement('div', {
                        key: 'name-group',
                        className: 'grid grid-cols-2 gap-4'
                    }, [
                        React.createElement('div', { key: 'name-en' }, [
                            React.createElement('label', {
                                key: 'label',
                                className: 'block text-sm font-medium mb-1'
                            }, 'Section Name (English)'),
                            React.createElement('input', {
                                key: 'input',
                                type: 'text',
                                className: 'input',
                                value: formData.name,
                                onChange: (e) => setFormData(prev => ({ ...prev, name: e.target.value })),
                                required: true
                            })
                        ]),
                        React.createElement('div', { key: 'name-ar' }, [
                            React.createElement('label', {
                                key: 'label',
                                className: 'block text-sm font-medium mb-1'
                            }, 'Section Name (Arabic)'),
                            React.createElement('input', {
                                key: 'input',
                                type: 'text',
                                className: 'input',
                                value: formData.nameAr,
                                onChange: (e) => setFormData(prev => ({ ...prev, nameAr: e.target.value }))
                            })
                        ])
                    ]),

                    React.createElement('div', {
                        key: 'description-group',
                        className: 'grid grid-cols-2 gap-4'
                    }, [
                        React.createElement('div', { key: 'desc-en' }, [
                            React.createElement('label', {
                                key: 'label',
                                className: 'block text-sm font-medium mb-1'
                            }, 'Description (English)'),
                            React.createElement('textarea', {
                                key: 'input',
                                className: 'input textarea',
                                value: formData.description,
                                onChange: (e) => setFormData(prev => ({ ...prev, description: e.target.value }))
                            })
                        ]),
                        React.createElement('div', { key: 'desc-ar' }, [
                            React.createElement('label', {
                                key: 'label',
                                className: 'block text-sm font-medium mb-1'
                            }, 'Description (Arabic)'),
                            React.createElement('textarea', {
                                key: 'input',
                                className: 'input textarea',
                                value: formData.descriptionAr,
                                onChange: (e) => setFormData(prev => ({ ...prev, descriptionAr: e.target.value }))
                            })
                        ])
                    ]),

                    React.createElement('div', {
                        key: 'buttons',
                        className: 'flex gap-3 pt-4'
                    }, [
                        React.createElement('button', {
                            key: 'cancel',
                            type: 'button',
                            className: 'btn btn-secondary flex-1',
                            onClick: onClose
                        }, t('cancel')),
                        React.createElement('button', {
                            key: 'save',
                            type: 'submit',
                            className: 'btn btn-primary flex-1'
                        }, t('save'))
                    ])
                ])
            ]);
        }

        function ShareModal({ isOpen, onClose, menu }) {
            const { t } = useLanguage();
            const [qrCode, setQrCode] = useState('');
            
            const shareUrl = `${window.location.origin}/menu/${menu.id || 'preview'}`;

            useEffect(() => {
                if (isOpen && window.QRCode) {
                    window.QRCode.toDataURL(shareUrl, (err, url) => {
                        if (!err) setQrCode(url);
                    });
                }
            }, [isOpen, shareUrl]);

            return React.createElement(Modal, {
                isOpen,
                onClose
            }, [
                React.createElement('h2', {
                    key: 'title',
                    className: 'text-xl font-semibold mb-4'
                }, 'Share Menu'),

                React.createElement('div', {
                    key: 'content',
                    className: 'space-y-4'
                }, [
                    React.createElement('div', { key: 'url' }, [
                        React.createElement('label', {
                            key: 'label',
                            className: 'block text-sm font-medium mb-2'
                        }, t('shareUrl')),
                        React.createElement('input', {
                            key: 'input',
                            type: 'text',
                            className: 'input',
                            value: shareUrl,
                            readOnly: true,
                            onClick: (e) => e.target.select()
                        })
                    ]),

                    qrCode && React.createElement('div', {
                        key: 'qr',
                        className: 'text-center'
                    }, [
                        React.createElement('p', {
                            key: 'label',
                            className: 'text-sm font-medium mb-2'
                        }, t('qrCode')),
                        React.createElement('img', {
                            key: 'qr-image',
                            src: qrCode,
                            alt: 'QR Code',
                            className: 'mx-auto w-32 h-32'
                        })
                    ]),

                    React.createElement('button', {
                        key: 'close',
                        className: 'btn btn-primary w-full',
                        onClick: onClose
                    }, t('close'))
                ])
            ]);
        }

        // Main Menu Editor Component with Mobile Support
        function MenuEditor({ template, onBack }) {
            const { t, isRTL, language } = useLanguage();
            const { addToast } = useToast();
            
            // State management
            const [menu, setMenu] = useState({
                templateId: template.id,
                restaurantName: '',
                name: '',
                tagline: ''
            });
            
            const [sections, setSections] = useState([]);
            const [viewMode, setViewMode] = useState('desktop');
            const [editingItem, setEditingItem] = useState(null);
            const [editingSection, setEditingSection] = useState(null);
            const [showItemModal, setShowItemModal] = useState(false);
            const [showSectionModal, setShowSectionModal] = useState(false);
            const [showShareModal, setShowShareModal] = useState(false);
            const [currentSectionId, setCurrentSectionId] = useState(null);
            const [isSaving, setIsSaving] = useState(false);
            const [showMobileSidebar, setShowMobileSidebar] = useState(false);

            // Load saved data on component mount
            useEffect(() => {
                const savedMenu = storage.load('currentMenu');
                const savedSections = storage.load('currentSections');
                
                if (savedMenu) setMenu(savedMenu);
                if (savedSections) setSections(savedSections);
            }, []);

            // Auto-save functionality
            useEffect(() => {
                const timer = setTimeout(() => {
                    storage.save('currentMenu', menu);
                    storage.save('currentSections', sections);
                }, 1000);

                return () => clearTimeout(timer);
            }, [menu, sections]);

            // Menu operations
            const updateMenu = (updates) => {
                setMenu(prev => ({ ...prev, ...updates }));
            };

            // Section operations
            const addSection = (sectionData) => {
                const newSection = {
                    id: Date.now(),
                    ...sectionData,
                    items: []
                };
                setSections(prev => [...prev, newSection]);
            };

            const editSection = (sectionData) => {
                setSections(prev => prev.map(section =>
                    section.id === editingSection.id
                        ? { ...section, ...sectionData }
                        : section
                ));
            };

            const deleteSection = (sectionId) => {
                setSections(prev => prev.filter(section => section.id !== sectionId));
            };

            // Item operations
            const addItem = (itemData) => {
                const newItem = {
                    id: Date.now(),
                    ...itemData
                };
                
                setSections(prev => prev.map(section =>
                    section.id === currentSectionId
                        ? { ...section, items: [...section.items, newItem] }
                        : section
                ));
            };

            const editItem = (itemData) => {
                setSections(prev => prev.map(section => ({
                    ...section,
                    items: section.items.map(item =>
                        item.id === editingItem.id
                            ? { ...item, ...itemData }
                            : item
                    )
                })));
            };

            const deleteItem = (sectionId, itemId) => {
                setSections(prev => prev.map(section =>
                    section.id === sectionId
                        ? { ...section, items: section.items.filter(item => item.id !== itemId) }
                        : section
                ));
            };

            // UI handlers
            const handleAddSection = () => {
                setEditingSection(null);
                setShowSectionModal(true);
            };

            const handleEditSection = (section) => {
                setEditingSection(section);
                setShowSectionModal(true);
            };

            const handleAddItem = (sectionId) => {
                setCurrentSectionId(sectionId);
                setEditingItem(null);
                setShowItemModal(true);
            };

            const handleEditItem = (item) => {
                setEditingItem(item);
                setShowItemModal(true);
            };

            const handleSave = async () => {
                setIsSaving(true);
                
                // Simulate save operation
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                addToast(t('saved'));
                setIsSaving(false);
            };

            const handlePublish = () => {
                setShowShareModal(true);
                addToast(t('published'));
            };

            return React.createElement('div', {
                className: `min-h-screen ${isRTL ? 'rtl' : ''}`
            }, [
                // Header
                React.createElement('div', {
                    key: 'header',
                    className: 'bg-white shadow-sm border-b border-gray-200'
                }, React.createElement('div', {
                    className: 'max-w-7xl mx-auto px-6 py-4'
                }, React.createElement('div', {
                    className: 'flex items-center justify-between'
                }, [
                    React.createElement('div', {
                        key: 'left',
                        className: 'flex items-center gap-4'
                    }, [
                        React.createElement('button', {
                            key: 'back',
                            className: 'btn btn-ghost',
                            onClick: onBack
                        }, '← ' + t('back')),
                        React.createElement('h1', {
                            key: 'title',
                            className: 'text-2xl font-bold text-gray-800'
                        }, t('menuBuilder'))
                    ]),
                    
                    React.createElement('div', {
                        key: 'right',
                        className: 'flex items-center gap-4'
                    }, [
                        React.createElement('div', {
                            key: 'view-toggle',
                            className: 'flex bg-gray-100 rounded-lg p-1'
                        }, [
                            ['desktop', '🖥️'],
                            ['tablet', '📱'],
                            ['mobile', '📱']
                        ].map(([mode, icon]) => 
                            React.createElement('button', {
                                key: mode,
                                className: `px-3 py-2 rounded flex items-center gap-2 transition-all enhanced-hover ${
                                    viewMode === mode ? 'bg-white shadow text-blue-600' : 'text-gray-600 hover:text-gray-800'
                                }`,
                                onClick: () => setViewMode(mode)
                            }, [
                                React.createElement('span', { key: 'icon' }, icon),
                                React.createElement('span', { key: 'text' }, t(mode))
                            ])
                        )),
                        
                        React.createElement('button', {
                            key: 'save',
                            className: 'btn btn-secondary enhanced-hover',
                            onClick: handleSave,
                            disabled: isSaving
                        }, isSaving ? [
                            React.createElement('div', {
                                key: 'spinner',
                                className: 'loading-spinner mr-2'
                            }),
                            t('saving')
                        ] : t('save')),
                        
                        React.createElement('button', {
                            key: 'publish',
                            className: 'btn btn-primary enhanced-hover',
                            onClick: handlePublish
                        }, t('publish'))
                    ])
                ]))),

                // Main Content
                React.createElement('div', {
                    key: 'content',
                    className: 'flex h-screen'
                }, [
                    // Sidebar
                    React.createElement('div', {
                        key: 'sidebar',
                        className: 'w-80 bg-white border-r border-gray-200 overflow-y-auto'
                    }, React.createElement('div', {
                        className: 'p-6'
                    }, [
                        // Restaurant Info
                        React.createElement('div', {
                            key: 'restaurant-info',
                            className: 'mb-8'
                        }, [
                            React.createElement('h2', {
                                key: 'title',
                                className: 'text-lg font-semibold mb-4'
                            }, 'Restaurant Information'),
                            React.createElement('div', {
                                key: 'form',
                                className: 'space-y-4'
                            }, [
                                React.createElement('div', { key: 'name' }, [
                                    React.createElement('label', {
                                        key: 'label',
                                        className: 'block text-sm font-medium mb-1'
                                    }, t('restaurantName')),
                                    React.createElement('input', {
                                        key: 'input',
                                        type: 'text',
                                        className: 'input',
                                        value: menu.restaurantName,
                                        onChange: (e) => updateMenu({ restaurantName: e.target.value })
                                    })
                                ]),
                                React.createElement('div', { key: 'menu-name' }, [
                                    React.createElement('label', {
                                        key: 'label',
                                        className: 'block text-sm font-medium mb-1'
                                    }, t('menuTitle')),
                                    React.createElement('input', {
                                        key: 'input',
                                        type: 'text',
                                        className: 'input',
                                        value: menu.name,
                                        onChange: (e) => updateMenu({ name: e.target.value })
                                    })
                                ]),
                                React.createElement('div', { key: 'tagline' }, [
                                    React.createElement('label', {
                                        key: 'label',
                                        className: 'block text-sm font-medium mb-1'
                                    }, t('tagline')),
                                    React.createElement('input', {
                                        key: 'input',
                                        type: 'text',
                                        className: 'input',
                                        value: menu.tagline,
                                        onChange: (e) => updateMenu({ tagline: e.target.value })
                                    })
                                ])
                            ])
                        ]),

                        // Sections
                        React.createElement('div', {
                            key: 'sections',
                            className: 'mb-8'
                        }, [
                            React.createElement('div', {
                                key: 'header',
                                className: 'flex items-center justify-between mb-4'
                            }, [
                                React.createElement('h2', {
                                    key: 'title',
                                    className: 'text-lg font-semibold'
                                }, 'Menu Sections'),
                                React.createElement('button', {
                                    key: 'add',
                                    className: 'btn btn-primary btn-sm enhanced-hover',
                                    onClick: handleAddSection
                                }, t('addSection'))
                            ]),

                            React.createElement('div', {
                                key: 'list',
                                className: 'space-y-3'
                            }, sections.map(section =>
                                React.createElement('div', {
                                    key: section.id,
                                    className: 'border border-gray-200 rounded-lg p-4 enhanced-hover'
                                }, [
                                    React.createElement('div', {
                                        key: 'header',
                                        className: 'flex items-center justify-between mb-3'
                                    }, [
                                        React.createElement('h3', {
                                            key: 'name',
                                            className: 'font-medium'
                                        }, section.name),
                                        React.createElement('div', {
                                            key: 'actions',
                                            className: 'flex gap-2'
                                        }, [
                                            React.createElement('button', {
                                                key: 'edit',
                                                className: 'text-blue-600 hover:text-blue-800 text-sm',
                                                onClick: () => handleEditSection(section)
                                            }, t('edit')),
                                            React.createElement('button', {
                                                key: 'delete',
                                                className: 'text-red-600 hover:text-red-800 text-sm',
                                                onClick: () => deleteSection(section.id)
                                            }, t('delete'))
                                        ])
                                    ]),

                                    React.createElement('div', {
                                        key: 'items',
                                        className: 'space-y-2 mb-3'
                                    }, section.items.map(item =>
                                        React.createElement('div', {
                                            key: item.id,
                                            className: 'flex items-center justify-between py-2 px-3 bg-gray-50 rounded text-sm'
                                        }, [
                                            React.createElement('span', {
                                                key: 'name'
                                            }, item.name),
                                            React.createElement('div', {
                                                key: 'actions',
                                                className: 'flex gap-2'
                                            }, [
                                                React.createElement('button', {
                                                    key: 'edit',
                                                    className: 'text-blue-600 hover:text-blue-800 text-xs',
                                                    onClick: () => handleEditItem(item)
                                                }, t('edit')),
                                                React.createElement('button', {
                                                    key: 'delete',
                                                    className: 'text-red-600 hover:text-red-800 text-xs',
                                                    onClick: () => deleteItem(section.id, item.id)
                                                }, t('delete'))
                                            ])
                                        ])
                                    )),

                                    React.createElement('button', {
                                        key: 'add-item',
                                        className: 'btn btn-ghost btn-sm w-full enhanced-hover',
                                        onClick: () => handleAddItem(section.id)
                                    }, t('addItem'))
                                ])
                            ))
                        ])
                    ])),

                    // Preview Area
                    React.createElement('div', {
                        key: 'preview',
                        className: 'flex-1 bg-gray-50 p-4 md:p-8 overflow-y-auto'
                    }, React.createElement(MenuPreview, {
                        menu,
                        sections,
                        isDesktop: viewMode === 'desktop',
                        selectedTemplate: template
                    }))
                ]),

                // Modals
                React.createElement(ItemModal, {
                    key: 'item-modal',
                    isOpen: showItemModal,
                    onClose: () => setShowItemModal(false),
                    onSave: editingItem ? editItem : addItem,
                    item: editingItem
                }),
                React.createElement(SectionModal, {
                    key: 'section-modal',
                    isOpen: showSectionModal,
                    onClose: () => setShowSectionModal(false),
                    onSave: editingSection ? editSection : addSection,
                    section: editingSection
                }),
                React.createElement(ShareModal, {
                    key: 'share-modal',
                    isOpen: showShareModal,
                    onClose: () => setShowShareModal(false),
                    menu: menu
                })
            ]);
        }

        // Language Toggle Component
        function LanguageToggle() {
            const { language, toggleLanguage } = useLanguage();
            
            return React.createElement('button', {
                className: 'language-toggle enhanced-hover rtl-smooth',
                onClick: toggleLanguage
            }, language === 'en' ? '🇸🇦 العربية' : '🇺🇸 English');
        }

        // Toast Container
        function ToastContainer() {
            const { toasts, removeToast } = useToast();

            return React.createElement('div', {
                className: 'fixed bottom-4 right-4 z-50 space-y-2'
            }, toasts.map(toast =>
                React.createElement('div', {
                    key: toast.id,
                    className: `toast toast-${toast.type}`,
                    onClick: () => removeToast(toast.id)
                }, [
                    React.createElement('span', { key: 'message' }, toast.message),
                    React.createElement('button', {
                        key: 'close',
                        className: 'ml-2 text-gray-500 hover:text-gray-700',
                        onClick: () => removeToast(toast.id)
                    }, '×')
                ])
            ));
        }

        // Main App Component with Authentication Flow
        function App() {
            const [currentStep, setCurrentStep] = useState('auth');
            const [selectedTemplate, setSelectedTemplate] = useState(null);
            const [currentUser, setCurrentUser] = useState(null);

            // Check for existing user on mount
            useEffect(() => {
                const savedUser = storage.load('currentUser');
                if (savedUser) {
                    setCurrentUser(savedUser);
                    setCurrentStep('template');
                }
            }, []);

            const handleAuthenticated = (userData) => {
                setCurrentUser(userData);
                setCurrentStep('template');
            };

            const handleSelectTemplate = (template) => {
                setSelectedTemplate(template);
                setCurrentStep('editor');
            };

            const handleBackToTemplates = () => {
                setCurrentStep('template');
                setSelectedTemplate(null);
                // Clear saved data
                storage.remove('currentMenu');
                storage.remove('currentSections');
            };

            const handleLogout = () => {
                storage.remove('currentUser');
                storage.remove('currentMenu');
                storage.remove('currentSections');
                setCurrentUser(null);
                setCurrentStep('auth');
            };

            return React.createElement('div', { 
                className: 'min-h-screen'
            }, [
                React.createElement(LanguageToggle, { key: 'lang-toggle' }),
                React.createElement(ToastContainer, { key: 'toasts' }),
                
                // User info display when logged in
                currentUser && currentStep !== 'auth' && React.createElement('div', {
                    key: 'user-info',
                    className: 'fixed top-4 left-4 z-50 bg-white rounded-lg p-3 shadow-lg text-sm'
                }, [
                    React.createElement('div', {
                        key: 'welcome',
                        className: 'text-gray-600'
                    }, `Welcome, ${currentUser.name}`),
                    React.createElement('button', {
                        key: 'logout',
                        className: 'text-blue-600 hover:text-blue-800 mt-1',
                        onClick: handleLogout
                    }, 'Logout')
                ]),

                React.createElement('div', { key: 'content' },
                    currentStep === 'auth' 
                        ? React.createElement(AuthScreen, {
                            onAuthenticated: handleAuthenticated
                        })
                        : currentStep === 'template' 
                        ? React.createElement(TemplateSelection, {
                            onSelectTemplate: handleSelectTemplate
                        })
                        : React.createElement(MenuEditor, {
                            template: selectedTemplate,
                            onBack: handleBackToTemplates
                        })
                )
            ]);
        }

        // Root App with Providers
        function RootApp() {
            return React.createElement(LanguageProvider, null,
                React.createElement(ToastProvider, null,
                    React.createElement(App)
                )
            );
        }

        // Initialize the app
        ReactDOM.render(React.createElement(RootApp), document.getElementById('root'));
    </script>
</body>
</html>
